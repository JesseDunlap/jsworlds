global.__usePATH = ["lib"];
global.__inUse   = [];

global.use = function(library) {
	/**
	 * dont load the library if it's already loaded
	 */
	if (__inUse.indexOf(library) != -1) return;
	
	var parts 	= library.split(".");
	var path 	= library.replace(/\./g, "/");
	var main    = parts[parts.length - 1];
	
	__usePATH.forEach(function(location) {
		if (require('fs').existsSync(location + "/" + path) &&
			require('fs').statSync(location + "/" + path).isDirectory()) {
			var files = require('fs').readdirSync(location + "/" + path);
			
			files.forEach(function(file) {
				if (file.replace('.js', '') != file) {
					var parts = file.split(".");
					var main  = parts[0];
					global[main] = require('../../' + location + '/' + path + '/' + file);
				}
			});
			
			__inUse.push(library);
		}
		
		else {
			path += ".js";
			global[main] = require('../../' + location + '/' + path);
			__inUse.push(library);
			return;
		}
	});
};